# Linux Group Management Commands

Groups basically are the collection of users:

A user can have:

- **Primary groups** => **created on user creation by default** **group name is same as username.**

- **Secondary groups** Other groups assigned manually.

```bash
id "$USER"
# uid=1003(test) gid=1003(test) groups=1003(test),100(users)
```

In the above case, user `test` has:
- Primary group: ``1003(test)``
- Secondary group: ``1003(test),100(users)``

> Note that user can have only one primary group but can have multiple secondary groups.

## Points To Remember:

- **When user is created, by default a group with same username is created and is the primary group of user**

```bash
# create a new user: foo_user
sudo useradd foo_user

# details of new user: foo_user
id foo_user 
# uid=1005(foo_user) gid=1008(foo_user) groups=1008(foo_user)
```

Here, a group ``foo_user`` is created and is a primary group of the ``foo_user``


- **When creating a file/directory, owner is a user who creates it, group owner is user's primary group.**

```bash
# current user groups, id info: primary_group = foo_user
id foo_user
# uid=1005(foo_user) gid=1008(foo_user) groups=1008(foo_user)

# create file and directory
touch file
mkdir folder

# view directory info
ls -l
total 4
-rw-rw-r-- 1 foo_user foo_user    0 Dec  9 18:35 file
drwxrwxr-x 2 foo_user foo_user 4096 Dec  9 18:35 folder
```

Here, a new file created has:
- Owner (User): 1st ``foo_user``
- Group Owner: 2nd ``foo_user``


# 1. Group File:

Informations about a group are stored in: ```/etc/group``` file.

```bash
cat /etc/group

# group3:x:1006:
# new_user:x:1007:
# foo_user:x:1008:
# test_group:x:1009:test,surya
# test_group1:x:1010:test
```

Here, this flie represents:

```bash
# group_name:password_placeholder:GID:group_members
test_group:x:1009:test,surya
```

- ``test_group`` => Group Name
- ``x`` => Placeholder for group password. 
- ``1009`` => GID (Group ID)
- ``test,surya`` => Group of user in the test group.

> If groupid <= 999 its a system created group.

> If groupid >= its a custom created group.

- **system groups:** ``cat /etc/group | awk -F: '$3 <= 999'``

- **Custom groups:** ``cat /etc/group | awk -F: '$3 >= 1000'``

